<div class="max-w-6xl mx-auto">
  <header class="mb-6"> 
    <h1 class="text-3xl font-bold text-slate-800">Gerenciador de Tarefas - Estudos</h1>
    <p class="text-slate-600 mt-1">Cards em 3 colunas: Para fazer, Em andamento, Concluídas.</p>
  </header>

  <div class="mb-6 flex items-center justify-between">
    <div>
      <p class="text-slate-600">Adicione novas tarefas pelo botão <span class="font-semibold">+</span>.</p>
    </div>
    <div>
      <button id="open-form-btn" aria-label="Adicionar tarefa"
        class="w-10 h-10 rounded-full bg-indigo-600 text-white flex items-center justify-center text-2xl hover:bg-indigo-700 cursor-pointer"
        (click)="openModal()">+</button>
    </div>
  </div>

  <!-- Modal (hidden by default) -->
   <app-form-modal 
    (outputModal)="reloadUsers()"></app-form-modal>
  <!-- <app-form-modal     
    [showModal]="modal()"
    (outputModal)="closeModal()"></app-form-modal> -->

  <main>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div>
        <h2 class="font-semibold mb-2">Para fazer</h2>
        <div id="col-todo" class="space-y-3 min-h-[200px] p-3 bg-white rounded shadow-sm" data-status="todo">
          @for(task of tasks(); track task.id) {
            @if(task.status == 'todo') {
              <task-card
                [title]="task.title | uppercase"
                [due]="task.due"
                [level]="task.level | levelMask"
                [desc]="task.description"
                [status]="task.status"
                (cardClicked)="onCardClicked($event)">
              </task-card>
            }
          }
        </div>
      </div>
      <div>
        <h2 class="font-semibold mb-2">Em andamento</h2>
        <div id="col-doing" class="space-y-3 min-h-[200px] p-3 bg-white rounded shadow-sm" data-status="doing">
          @for(task of tasks(); track task.id) {
            @if(task.status == 'doing') {
              <task-card
                [title]="task.title"
                [due]="task.due"
                [level]="task.level | levelMask"
                [desc]="task.description"
                [status]="task.status">
              </task-card>
            }
          }
        </div>
      </div>
      <div>
        <h2 class="font-semibold mb-2">Concluídas</h2>
        <div id="col-done" class="space-y-3 min-h-[200px] p-3 bg-white rounded shadow-sm" data-status="done">
          @for(task of tasks(); track task.id) {
            @if(task.status == 'done') {
              <task-card
                [title]="task.title"
                [due]="task.due"
                [level]="task.level | levelMask"
                [desc]="task.description"
                [status]="task.status">
              </task-card>
            }
          }
        </div>
      </div>
    </div>
  </main>

  <footer class="mt-6 text-sm text-slate-500">Salvo no armazenamento local do seu navegador.</footer>
</div>